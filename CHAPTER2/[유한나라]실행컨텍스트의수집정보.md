# 실행 컨텍스트의 수집 정보

실행 컨텍스트에 담기는 정보는

- Variable Environment
- Lexical Environment
- ThisBinding

이렇게 존재한다.

<br>
<br>

## Variable Environment

Variable Environment(줄여서 V.E)에는 Lexical Environment(줄여서 L.E)과 담기는 내용은 같다.

- environmentRecord
- outerEnvrionmentReference

가 담기지만 L.E와 차이점은 "스냅샷" 을 유지한다는 점이 다릅니다.

실행 컨텍스트를 생성할 때 V.E에 정보를 먼저 담은 다음 V.E의 정보를 복사하여 L.E를 만들어 이후 L.E를 주로 사용합니다.

V.E에 담긴 정보들은 말 그대로 스냅샷이기에 이후 변경점들은 반영되지 않습니다.

<br>

## Lexical Environment

L.E에 담기는 내용은 V.E와 같지만 변경점이 생긴다면 반영시킵니다.

<br>

### **environment Record(환경 레코드)**

envrionmentRecord(줄여서 e.R)에는 현재 컨텍스트와 관련된 **코드의 식별자 정보** 들이 저장됩니다.

e.R에는 두가지 타입이 존재한다.
- 선언 환경 레코드 (Declarative environment record) : 변수와 함수선언을 저장합니다.
- 객체 환경 레코드 (Object environment record) : 전역 바인딩 객체가 저장된다.

대개 함수에 지정된 매개변수 식별자, 선언문으로 작성된 함수 그 자체, var로 선언된 식별자 등이 저장됩니다.

컨텍스트 내부 전체를 처음부터 끝까지 순서대로 수집합니다.

이 수집과정은 컨텍스트가 생성되자마자 수집합니다. 즉 코드가 실행되기 전에 자바스크립트 엔진은 이미 코드의 변수명을 모두 알고있는 것입니다.

이 과정을 **호이스팅**이라 부르는 것입니다.

호이스팅은 말 그대로 끌어올리다 라는 뜻이고 실제로 자바스크립트 엔진이 코드를 끌어올려 해석하지 않지만 수집과정이 실행되기 전에 변수명을 저장해서 "마치 끌어올려 실행한다"라고 추상적으로 비유하는 것 입니다.

<br>

### outerEnvironmentReference

outerEnvironmentReference(줄여서 o.E.R)을 설명하기 전 스코프의 개념에 대해서 알고 넘어가자.

> 스코프는 변수의 유효범위를 뜻합니다.
>
> ES5까지의 자바스크립트는 오직 함수에 의해서만 스코프가 생성됩니다.
>
> 이런 식별자의 유효범위를 안에서부터 바깥까지 차례로 검색해나가는 것을 "스코프체인" 이라고 부르고,
>
> 이 "스코프체인" 이 가능하게 만드는것이 o.E.R입니다.

<br>

o.E.R는 상위 L.E를 참조하게 하는 포인터이며 스코프를 탐색하기 위해서 사용됩니다.

코드상에서 어떤 변수를 접근하고자 한다면 현재 컨텍스트의 L.E를 탐색하고, 발견한다면 값을 반환, 아니라면 o.E.R에 담긴 L.E를 탐색하는 과정을 거칩니다.

전역컨텍스트의 L.E까지 탐색을 했지만 변수를 찾지 못했을 때는 undefined를 반환합니다.

<br>



위 코드에서 


<br>

## ThisBinding

